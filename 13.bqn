âŸ¨_splitâŸ© â† â€¢Import "util.bqn"
packets â† â€¢BQNâŠ0Â¨ {mâ†/'['=ğ•© â‹„ nâ†/']'=ğ•© â‹„ 'âŸ©'Â¨âŒ¾(nâŠâŠ¢) 'âŸ¨'Â¨âŒ¾(mâŠâŠ¢) ğ•©}Â¨ â€¢file.Lines "13.input"
# this works but is a hack, and doesn't work for p2
p1 â† +Â´1+/(âŠ¢â‰¡âˆ§)Â¨ (0â‰¡âŠ¢)Â¨ _split packets
padded â† âŸ¨âŸ¨2âŸ©âŸ© <âŠ¸âˆ¾ âŸ¨âŸ¨6âŸ©âŸ© <âŠ¸âˆ¾ (0â‰¢âŠ¢)Â¨âŠ¸/ packets
# if only...
# p2 â† Ã—Â´1+2â†‘â‹â‹ s â† âŸ¨âŸ¨2âŸ©âŸ© <âŠ¸âˆ¾ âŸ¨âŸ¨6âŸ©âŸ© <âŠ¸âˆ¾ (0â‰¢âŠ¢)Â¨âŠ¸/ packets

Compare â† {
 ((1=â€¢Type ğ•¨)âˆ§(1=â€¢Type ğ•©)) ? Ã— ğ•¨ - ğ•© ;
 ((0=â€¢Type ğ•¨)âˆ§(0=â€¢Type ğ•©)) ?
  n â† ğ•¨ âŒŠâ—‹â‰  ğ•© â‹„
  r â† âŠ‘âŠ0 (0 â‰  âŠ¢)âŠ¸/ ğ•¨ ğ•ŠÂ¨â—‹(nâ†‘âŠ¢) ğ•© â‹„
  ğ•¨ { r â‰  0 ? r ; Ã— ğ•¨ -â—‹â‰  ğ•© } ğ•© ;
  ((1=â€¢Type ğ•¨)âˆ§(0=â€¢Type ğ•©)) ? (â‹ˆğ•¨) ğ•Š ğ•© ;
  ((0=â€¢Type ğ•¨)âˆ§(1=â€¢Type ğ•©)) ? ğ•¨ ğ•Š â‹ˆğ•© ;
  !Ëœ "Unhandled case"â€¿(â€¢Type ğ•¨)â€¿(â€¢Type ğ•©)
}

p2 â† Ã—Â´ 1 + 2 â†‘ â‹â‹ +Â´Ë˜ CompareâŒœËœ padded
