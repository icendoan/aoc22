âŸ¨IntâŸ© â† â€¢Import "util.bqn"
lines â† â€¢file.Lines "7.input"
push  â† "$ cd"âŠ¸â‰¡Â¨ 4â†‘Â¨ lines
pop   â† "$ cd .."âŠ¸â‰¡Â¨ lines
depth â† +` push - 2 Ã— pop
files â† (('$' â‰  âŠ‘)Â¨ âˆ§ ("dir" â‰¢ 3 â†‘ âŠ¢)Â¨) lines
sizes â† files Ã— (Int âŠ’âŸœ' ' â†‘ âŠ¢)Â¨ lines
dirs  â† Â¯1 âŠ‘Â¨ {ğ•¨ğ•Š1â€¿x:1â€¿x;ğ•¨}` <Ë˜ (pushâ‰ pop) â‰âˆ˜â‰ 5â†“Â¨lines
subs  â† {("dir"â‰¡3â†‘âŠ¢) ğ•© ? 4 â†“ ğ•© ; ""}Â¨ lines
t â† â‰[lines, dirs, depth, files, sizes, subs]

resolved â† { ğ•Š d:
 mask â† depth = d 
 leaves â† â· mask / dirs 
 pruned â† +Â´Â¨ dirs âŠâŠ¸âŠ”â—‹(maskâŠ¸/) sizes 
 sizes â†© sizes + (leaves âŠ subs) âŠ pruned âˆ¾ 0 
}Â¨ âˆ¨â·depth

total â† +Â´Â¨ dirs âŠâŠ¸âŠ” sizes

â€¢Show â‰ (â·dirs) â‰ total

p1 â† +Â´ (100000â‰¥âŠ¢)âŠ¸/ total
p2 â† 0

p1â€¿p2
